define("tool_skills/skills",["jquery","core/modal_factory","core/str","core_form/modalform"],(function($,ModalFactory,Str,ModalForm){const SELECTORS={table:"#tool_skills_list",editskill:'[data-target="toolskill-edit"]',skillsRow:"#tool_skills_list .skill-actions a.action-edit"};class ToolSkillsCourses{constructor(skillID,courseID){this.SELECTORS=SELECTORS,this.skillCourseID="",this.skillID=skillID,this.courseID=courseID,this.SELECTORS.root='#tool_skills_list [data-skillid="'+this.skillID+'"]',this.addActionListiners()}getRoot(){return console.log(this.SELECTORS.root),document.querySelector(this.SELECTORS.root)}showContentForm(){const modalForm=new ModalForm({formClass:"tool_skills\\form\\course_form",args:{courseid:this.courseID,skill:this.skillID},modalConfig:{title:Str.get_string("courseskills","tool_skills")}});modalForm.show();modalForm.addEventListener(modalForm.events.FORM_SUBMITTED,(function(e){e.target.querySelector("form");window.location.reload()}))}addActionListiners(){var self=this;this.getRoot().addEventListener("click",function(e){e.target.closest(SELECTORS.editskill)&&(e.preventDefault(),self.showContentForm())}.bind(this))}static createInstances(courseID){let skills=document.querySelectorAll(SELECTORS.skillsRow);const skillsList=[];null!==skills&&skills.forEach((skl=>{var skillID=skl.dataset.skillid;if(skillID in skillsList)var skill=skillsList[skillID];else{skill=new ToolSkillsCourses(skillID,courseID);skillsList[skillID]=skill}}))}static refresh(blockID){var block="#inst"+blockID;0==$(block).find("select:eq(1)").length&&$(block).find(".filter-form").append('<select style="display:none;"><option>1</option></select>'),console.log($(block).find(".filter-form").find("select")),$(block).find(".filter-form").find("select").trigger("change")}}return{init:function(courseID){ToolSkillsCourses.createInstances(courseID)}}}));

//# sourceMappingURL=skills.min.js.map